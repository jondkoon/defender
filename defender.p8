pico-8 cartridge // http://www.pico-8.com
version 16
__lua__
x = 20
y = 60
dy = 0.5
dx = 0.5
ddy = 0.15
ddx = 0.1
decel = 0.5
s = {}
s.ship = 1
screen_width = 128
ship_height = 8
max_y = screen_width - ship_height

stars = {}
for i = 0, 50 + rnd(50) do
	local s = { 
		x = -56 + rnd(128 * 2),
		y = rnd(128)
	}
	add(stars, s)
end

function update_stars()
	local window_start = x - 20
	local window_end = window_start + 128
	for s in all(stars) do
		if (s.x < window_start - 56) then
			s.x = window_end + rnd(56)
			s.y = rnd(128)
		elseif (s.x > window_end + 56) then
			s.x = window_start - rnd(56)
			s.y = rnd(128)
		end
	end	
end

function draw_stars()
	local c = 7
	if (abs(dx) > 5) then
		c = 6
	end
	for s in all(stars) do
		line(s.x, s.y, s.x+dx, s.y, c)
	end
end

function _update60()
	if(btn(⬆️)) then
		dy = dy or -0.5
		dy -= ddy
	elseif(btn(⬇️)) then
		dy = dy or 0.5
		dy += ddy
	else
		if (abs(dy) <= decel) then
			dy = 0
		elseif (dy <= 0) then
			dy += decel
		elseif (dy > 0) then
			dy -= decel
		end
	end
	
	if (btn(➡️)) then
		dx += ddx
	elseif (btn(⬅️)) then
		dx -= ddx
	end
	
	y += dy
	x += dx
	
	if (y > max_y) then
		dy = -1
		y = max_y
	elseif (y < 0) then
		dy = 1
		y = 0
	end
	
	if (dy <= -1.5) then
		s.ship = 3
	elseif (dy <= -1) then
		s.ship = 2
	elseif (dy >= 1.5) then
		s.ship = 5
	elseif (dy >= 1) then
		s.ship = 4
	else
		s.ship = 1
	end
	
	if (dx > 0) then
		s.tail = min(27, 17 + (2 * flr(((dx - 0.5) / 1))))
		if (s.tail == 27 and flr(rnd(100)) < 90) then
			s.tail = 25
		end
	else
		s.tail = nil
	end

	update_stars()
end

function _draw()
	cls(0)
	camera(x-20, 0)
	draw_stars()
	local offset = flr(dx / 0.5)
	if (s.tail) then
		spr(s.tail, x+offset-8, y)
	end	
	spr(s.ship, x+offset, y)
end
__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000066600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700066660000666600000000000066660000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000055556600555566005555000066666600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000555555555555555556666655555555555666665500000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700055556600666666000000000055556600555500000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000066660000666600000000000066660000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000066600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000666000000000000066600000000000006660000000080000666000000008000066600000000800006660000000000000000000000000000
00000000000000000666600000000000066660000000880006666000000878000666600000089800066660000808a80006666000000000000000000000000000
00000000000000000555566000000000055556600000078005555660000087800555566000008a80055556600000978005555660000000000000000000000000
0000000000000078555555550000077855555555000087785555555500877778555555550089a77855555555808a77c855555555000000000000000000000000
00000000000000000555566000000000055556600000078005555660000087800555566000008a80055556600000978005555660000000000000000000000000
00000000000000000666600000000000066660000000880006666000000878000666600000089800066660000808a80006666000000000000000000000000000
00000000000000000666000000000000066600000000000006660000000080000666000000008000066600000000800006660000000000000000000000000000
